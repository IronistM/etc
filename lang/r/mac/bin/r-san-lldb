#!/usr/bin/env sh

## Run an R command within LLDB, in batch mode.
: ${R_ROOT="${HOME}/r-san"}
: ${R_HOME="`cd \`${R_ROOT} RHOME\`; pwd -P`"}
: ${R_EXEC="${R_HOME}/bin/R"}

if [ ! -f "${R_EXEC}" ]; then
    echo "No instrumented R executable found at '${R_EXEC}'"
    exit 1
fi

R_HOME=${R_HOME} lldb --batch --file "${R_EXEC}" -o "process launch -- $*"
